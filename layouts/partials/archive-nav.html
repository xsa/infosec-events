{{ $section := site.GetPage "section" "archives" }}
{{ if not $section }}{{ return }}{{ end }}

{{ $currentYear := now.Format "2006" | int }}
{{ $items := slice }}

{{ range $section.RegularPages }}
  {{ $fname := .File.BaseFileName }}
  {{ if findRE `^(19|20)[0-9]{2}$` $fname }}
    {{ $year := int $fname }}
    {{ $items = $items | append (dict "year" $year "url" .RelPermalink) }}
  {{ end }}
{{ end }}

{{/* Ensure current year included */}}
{{ $found := false }}
{{ range $items }}{{ if eq .year $currentYear }}{{ $found = true }}{{ end }}{{ end }}
{{ if not $found }}
  {{ $items = $items | append (dict "year" $currentYear "url" (printf "/archives/%d/" $currentYear)) }}
{{ end }}

{{ $items = sort $items "year" "desc" }}

<nav class="archive-years">
  <ul style="display:flex; gap:1rem; list-style:none; padding:0;">
    {{ range $items }}
      <li><a href="{{ .url }}">{{ .year }}</a></li>
    {{ end }}
  </ul>
</nav>